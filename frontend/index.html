<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm to Table</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">Farm to Table</div>
        <div class="nav-links">
            <a href="#" class="nav-link" id="homeLink">Home</a>
            <a href="#" class="nav-link" id="loginLink">Login</a>
            <a href="#" class="nav-link" id="registerLink">Register</a>
            <div class="auth-links hidden">
                <a href="#" class="nav-link" id="dashboardLink">Dashboard</a>
                <a href="#" class="nav-link" id="logoutLink">Logout</a>
            </div>
        </div>
    </nav>

    <main>
        <!-- Guest Home Section -->
        <section id="guestHomeSection" class="section">
            <h1>Welcome to Farm to Table</h1>
            <div class="user-categories">
                <div class="category-card">
                    <h2>Farmer</h2>
                    <p>List and sell your fresh produce directly to consumers</p>
                    <button onclick="navigateTo('register', 'farmer')">Register as Farmer</button>
                </div>
                <div class="category-card">
                    <h2>Consumer</h2>
                    <p>Buy fresh, local produce directly from farmers</p>
                    <button onclick="navigateTo('register', 'consumer')">Register as Consumer</button>
                </div>
            </div>
        </section>

        <!-- Farmer Home Section -->
        <section id="farmerHomeSection" class="section hidden">
            <h1>Welcome Back, <span id="farmerName"></span></h1>
            <div class="dashboard-summary">
                <div class="summary-card">
                    <h3>My Listings</h3>
                    <p id="listingsCount">Loading...</p>
                    <button onclick="navigateTo('farmerDashboard')">Manage Listings</button>
                </div>
                <div class="summary-card">
                    <h3>Quick Add</h3>
                    <button onclick="navigateTo('farmerDashboard')">Add New Produce</button>
                </div>
                <div class="summary-card">
                    <h3>Recent Activity</h3>
                    <div id="recentActivity">Loading...</div>
                </div>
            </div>
        </section>

        <!-- Consumer Home Section -->
        <section id="consumerHomeSection" class="section hidden">
            <h1>Welcome Back, <span id="consumerName"></span></h1>
            <div class="dashboard-summary">
                <div class="summary-card">
                    <h3>Available Produce</h3>
                    <p id="availableCount">Loading...</p>
                    <button onclick="navigateTo('consumerDashboard')">Browse Produce</button>
                </div>
                <div class="summary-card">
                    <h3>Featured Items</h3>
                    <div id="featuredItems">Loading...</div>
                </div>
                <div class="summary-card">
                    <h3>Quick Filters</h3>
                    <button onclick="navigateTo('consumerDashboard', null, { grade: 'A' })">Grade A Produce</button>
                    <button onclick="navigateTo('consumerDashboard', null, { sortBy: 'pricePerMeasurement', sortOrder: 'asc' })">Best Prices</button>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="loginSection" class="section hidden">
            <div class="form-container">
                <h2>Login</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit">Login</button>
                </form>
            </div>
        </section>

        <!-- Register Section -->
        <section id="registerSection" class="section hidden">
            <div class="form-container">
                <h2>Register</h2>
                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerName">Name</label>
                        <input type="text" id="registerName" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="userType">User Type</label>
                        <select id="userType" required>
                            <option value="farmer">Farmer</option>
                            <option value="consumer">Consumer</option>
                        </select>
                    </div>
                    <button type="submit">Register</button>
                </form>
            </div>
        </section>

        <!-- Farmer Dashboard Section -->
        <section id="farmerDashboard" class="section hidden">
            <h2>Farmer Dashboard</h2>
            <div class="dashboard-container">
                <div class="produce-form">
                    <h3>Add New Produce</h3>
                    <form id="produceForm">
                        <div class="form-group">
                            <label for="produceType">Produce Type</label>
                            <input type="text" id="produceType" required>
                        </div>
                        <div class="form-group">
                            <label for="amount">Amount</label>
                            <input type="number" id="amount" required>
                        </div>
                        <div class="form-group">
                            <label for="measurement">Measurement</label>
                            <select id="measurement" required>
                                <option value="kg">Kilograms</option>
                                <option value="lbs">Pounds</option>
                                <option value="units">Units</option>
                                <option value="boxes">Boxes</option>
                                <option value="bushels">Bushels</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="grade">Grade</label>
                            <select id="grade" required>
                                <option value="A">Grade A</option>
                                <option value="B">Grade B</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="location">Location</label>
                            <input type="text" id="location" required>
                        </div>
                        <div class="form-group">
                            <label for="price">Price per Measurement</label>
                            <input type="number" id="price" step="0.01" required>
                        </div>
                        <button type="submit">Add Produce</button>
                    </form>
                </div>
                <div class="my-listings">
                    <h3>My Listings</h3>
                    <div id="produceListings"></div>
                </div>
            </div>
        </section>

        <!-- Consumer Dashboard Section -->
        <section id="consumerDashboard" class="section hidden">
            <h2>Available Produce</h2>
            <div class="filters-container">
                <div class="filter-group">
                    <input type="text" id="produceTypeFilter" placeholder="Search by produce type..." class="filter-input">
                </div>
                <div class="filter-group">
                    <select id="measurementFilter" class="filter-input">
                        <option value="">All Measurements</option>
                    </select>
                </div>
                <div class="filter-group">
                    <select id="gradeFilter" class="filter-input">
                        <option value="">All Grades</option>
                        <option value="A">Grade A</option>
                        <option value="B">Grade B</option>
                    </select>
                </div>
                <div class="filter-group">
                    <input type="text" id="locationFilter" placeholder="Search by location..." class="filter-input">
                </div>
                <div class="filter-group price-range">
                    <input type="number" id="minPriceFilter" placeholder="Min price" class="filter-input">
                    <input type="number" id="maxPriceFilter" placeholder="Max price" class="filter-input">
                </div>
                <div class="filter-group">
                    <select id="sortBy" class="filter-input">
                        <option value="createdAt">Sort by Date</option>
                        <option value="pricePerMeasurement">Sort by Price</option>
                        <option value="produceType">Sort by Type</option>
                    </select>
                    <select id="sortOrder" class="filter-input">
                        <option value="desc">Descending</option>
                        <option value="asc">Ascending</option>
                    </select>
                </div>
            </div>
            <div class="produce-stats">
                <span id="totalCount">0 items found</span>
            </div>
            <div class="produce-grid" id="availableProduce">
                <!-- Produce items will be dynamically added here -->
            </div>
        </section>
    </main>

    <script src="js/auth.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/produce.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
