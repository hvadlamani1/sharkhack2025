<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFarm - Direct Farm to Consumer Platform</title>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="styles/main.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <header class="bg-white shadow-sm">
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" class="flex items-center">
                <img src="assets/logo.svg" alt="SmartFarm Logo" class="h-8">
                <span class="text-xl font-bold text-primary ml-2">SmartFarm</span>
            </a>
            <div class="flex items-center space-x-4">
                <a href="#" onclick="navigateTo('tracking')" class="nav-link">Real-Time Tracking</a>
                <a href="#" onclick="navigateTo('login')" id="loginLink" class="nav-link">Login</a>
                <a href="#" onclick="navigateTo('dashboard')" id="dashboardLink" class="bg-green-600 hover:bg-green-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200 hidden">Dashboard</a>
                <a href="#" onclick="logout()" id="logoutLink" class="nav-link hidden">Logout</a>
            </div>
        </nav>
    </header>

    <main>
        <!-- Welcome Section -->
        <div class="bg-gradient-to-r from-green-50 to-green-100 py-16 mb-12" id="guestWelcomeSection">
            <div class="container mx-auto px-4 text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-6">
                    Fresh From Farm to Your Table
                </h1>
                <p class="text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                    Experience the freshness of local produce while supporting your community farmers. Get better prices, fresher food, and a direct connection to the source.
                </p>
            </div>
        </div>

        <!-- User Type Selection -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto px-4" id="guestUserTypeSection">
            <!-- Farmer Card -->
            <div class="bg-white rounded-lg shadow-md p-8 hover:shadow-lg transition-shadow duration-300">
                <div class="flex justify-center mb-6">
                    <div class="w-32 h-32 flex items-center justify-center bg-green-50 rounded-full">
                        <img src="assets/farmer-icon.svg" alt="Farmer" class="w-20 h-20">
                    </div>
                </div>
                <h2 class="text-2xl font-semibold text-center text-gray-800 mb-4">Farmer</h2>
                <ul class="space-y-3 mb-6">
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        List and sell your fresh produce directly to consumers
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Set your own prices
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Reach more customers
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Reduce food waste
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Get farming advice
                    </li>
                </ul>
                <button onclick="navigateTo('register', 'farmer')" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200">
                    Register as Farmer
                </button>
            </div>

            <!-- Consumer Card -->
            <div class="bg-white rounded-lg shadow-md p-8 hover:shadow-lg transition-shadow duration-300">
                <div class="flex justify-center mb-6">
                    <div class="w-32 h-32 flex items-center justify-center bg-green-50 rounded-full">
                        <img src="assets/consumer-icon.svg" alt="Consumer" class="w-20 h-20">
                    </div>
                </div>
                <h2 class="text-2xl font-semibold text-center text-gray-800 mb-4">Consumer</h2>
                <ul class="space-y-3 mb-6">
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Buy fresh, local produce directly from farmers
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Access fresh produce
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Support local farmers
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Know your food source
                    </li>
                    <li class="flex items-center text-gray-600">
                        <span class="mr-2">✓</span>
                        Get better prices
                    </li>
                </ul>
                <button onclick="navigateTo('register', 'consumer')" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200">
                    Register as Consumer
                </button>
            </div>
        </div>

        <!-- Features Section - Only shown on guest/home page -->
        <div class="mt-16 mb-8" id="guestFeaturesSection">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">Why Choose SmartFarm?</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-6xl mx-auto px-4">
                <!-- Real-Time Tracking -->
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300 cursor-pointer" onclick="navigateTo('tracking')">
                    <div class="flex justify-center mb-4">
                        <img src="assets/tracking-icon.svg" alt="Tracking" class="w-16 h-16">
                    </div>
                    <h3 class="text-xl font-semibold text-center text-gray-800 mb-3">Real-Time Tracking</h3>
                    <p class="text-gray-600 text-center">Monitor your produce from farm to table with live updates and notifications.</p>
                </div>

                <!-- Smart Donations -->
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300 cursor-pointer" onclick="navigateTo('donations')">
                    <div class="flex justify-center mb-4">
                        <img src="assets/donation-icon.svg" alt="Donations" class="w-16 h-16">
                    </div>
                    <h3 class="text-xl font-semibold text-center text-gray-800 mb-3">Smart Donations</h3>
                    <p class="text-gray-600 text-center">Automatically donate excess produce to local food banks and track your impact.</p>
                </div>

                <!-- Fair Prices -->
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300 cursor-pointer" onclick="navigateTo('pricing')">
                    <div class="flex justify-center mb-4">
                        <img src="assets/price-icon.svg" alt="Prices" class="w-16 h-16">
                    </div>
                    <h3 class="text-xl font-semibold text-center text-gray-800 mb-3">Fair Prices</h3>
                    <p class="text-gray-600 text-center">Dynamic pricing ensures farmers get fair value and consumers get great deals.</p>
                </div>

                <!-- Smart Logistics -->
                <div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-300 cursor-pointer" onclick="navigateTo('logistics')">
                    <div class="flex justify-center mb-4">
                        <img src="assets/logistics-icon.svg" alt="Logistics" class="w-16 h-16">
                    </div>
                    <h3 class="text-xl font-semibold text-center text-gray-800 mb-3">Smart Logistics</h3>
                    <p class="text-gray-600 text-center">Optimized delivery routes and real-time order tracking for maximum efficiency.</p>
                </div>
            </div>
        </div>

        <!-- Farmer Home Section -->
        <section id="farmerHomeSection" class="section hidden">
            <h1>Welcome Back, <span id="farmerName"></span></h1>
            <div class="dashboard-summary">
                <div class="summary-card">
                    <h3>My Listings</h3>
                    <p id="listingsCount">Loading...</p>
                    <button onclick="navigateTo('farmerDashboard')">Manage Listings</button>
                </div>
                <div class="summary-card">
                    <h3>Quick Add</h3>
                    <button onclick="navigateTo('farmerDashboard')">Add New Produce</button>
                </div>
                <div class="summary-card">
                    <h3>Recent Activity</h3>
                    <div id="recentActivity">Loading...</div>
                </div>
            </div>
        </section>

        <!-- Consumer Home Section -->
        <section id="consumerHomeSection" class="section hidden">
            <h1>Welcome Back, <span id="consumerName"></span></h1>
            <div class="dashboard-summary">
                <div class="summary-card">
                    <h3>Available Produce</h3>
                    <p id="availableCount">Loading...</p>
                    <button onclick="navigateTo('consumerDashboard')">Browse Produce</button>
                </div>
                <div class="summary-card">
                    <h3>Featured Items</h3>
                    <div id="featuredItems">Loading...</div>
                </div>
                <div class="summary-card">
                    <h3>Quick Filters</h3>
                    <button onclick="navigateTo('consumerDashboard', null, { grade: 'A' })">Grade A Produce</button>
                    <button onclick="navigateTo('consumerDashboard', null, { sortBy: 'pricePerMeasurement', sortOrder: 'asc' })">Best Prices</button>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="loginSection" class="section hidden">
            <div class="container mx-auto px-4 py-8">
                <h2 class="text-2xl font-bold text-center mb-6 text-neutral-dark">Login to SmartFarm</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Farmer Login Box -->
                    <div class="bg-white rounded-lg shadow-md p-8 border-2 border-transparent hover:border-green-500 transition-all duration-200">
                        <div class="flex items-center justify-center mb-6">
                            <img src="assets/farmer-icon.svg" alt="Farmer" class="w-12 h-12">
                            <h3 class="text-xl font-semibold ml-3">Farmer Login</h3>
                        </div>
                        
                        <form id="farmerLoginForm" class="space-y-4" onsubmit="handleLogin(event, 'farmer')">
                            <div class="form-group">
                                <label for="farmerEmail" class="block text-sm font-medium text-neutral-dark mb-1">Email</label>
                                <input type="email" id="farmerEmail" name="email" required
                                    class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="farmerPassword" class="block text-sm font-medium text-neutral-dark mb-1">Password</label>
                                <input type="password" id="farmerPassword" name="password" required
                                    class="form-input">
                            </div>

                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                                Login as Farmer
                            </button>
                        </form>
                    </div>

                    <!-- Consumer Login Box -->
                    <div class="bg-white rounded-lg shadow-md p-8 border-2 border-transparent hover:border-green-500 transition-all duration-200">
                        <div class="flex items-center justify-center mb-6">
                            <img src="assets/consumer-icon.svg" alt="Consumer" class="w-12 h-12">
                            <h3 class="text-xl font-semibold ml-3">Consumer Login</h3>
                        </div>
                        
                        <form id="consumerLoginForm" class="space-y-4" onsubmit="handleLogin(event, 'consumer')">
                            <div class="form-group">
                                <label for="consumerEmail" class="block text-sm font-medium text-neutral-dark mb-1">Email</label>
                                <input type="email" id="consumerEmail" name="email" required
                                    class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="consumerPassword" class="block text-sm font-medium text-neutral-dark mb-1">Password</label>
                                <input type="password" id="consumerPassword" name="password" required
                                    class="form-input">
                            </div>

                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                                Login as Consumer
                            </button>
                        </form>
                    </div>
                </div>

                <div class="mt-8 text-center text-sm text-neutral">
                    <p>Don't have an account? 
                        <a href="#" onclick="navigateTo('register')" class="text-green-600 hover:text-green-700 font-medium">
                            Register here
                        </a>
                    </p>
                </div>
            </div>
        </section>

        <!-- Register Section -->
        <section id="registerSection" class="section hidden">
            <div class="form-container">
                <h2>Register</h2>
                
                <!-- User Type Selection -->
                <div id="userTypeSelection" class="active">
                    <h3>I am a:</h3>
                    <div class="user-type-options">
                        <div class="user-type-card" onclick="navigateTo('register', 'farmer')">
                            <h4>Farmer</h4>
                            <p>I want to sell produce</p>
                        </div>
                        <div class="user-type-card" onclick="navigateTo('register', 'consumer')">
                            <h4>Consumer</h4>
                            <p>I want to buy produce</p>
                        </div>
                    </div>
                </div>

                <!-- Registration Form (Initially Hidden) -->
                <form id="registerForm" onsubmit="handleRegister(event)" class="hidden">
                    <input type="hidden" id="userType" name="userType" value="">
                    
                    <!-- Common Fields -->
                    <div class="form-group">
                        <label for="name">Full Name:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" id="password" name="password" minlength="2" required>
                    </div>
                    <div class="form-group">
                        <label for="phoneNumber">Phone Number:</label>
                        <input type="tel" id="phoneNumber" name="phoneNumber">
                    </div>

                    <!-- Consumer Specific Fields -->
                    <div id="consumerFields" class="hidden">
                        <div class="form-group">
                            <label for="businessName">Business Name:</label>
                            <input type="text" id="businessName" name="businessName">
                        </div>
                        <div class="form-group">
                            <label for="businessType">Business Type:</label>
                            <select id="businessType" name="businessType">
                                <option value="">Select business type...</option>
                                <option value="Restaurant">Restaurant</option>
                                <option value="Grocery Store">Grocery Store</option>
                                <option value="Food Processing">Food Processing</option>
                                <option value="Food Bank/Shelter">Food Bank/Shelter</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                    </div>

                    <!-- Farmer Specific Fields -->
                    <div id="farmerFields" class="hidden">
                        <div class="form-group">
                            <label for="farmName">Farm Name:</label>
                            <input type="text" id="farmName" name="farmName">
                        </div>
                        <div class="form-group">
                            <label for="farmLocation">Farm Location:</label>
                            <input type="text" id="farmLocation" name="farmLocation">
                        </div>
                        <div class="form-group">
                            <label for="farmSize">Farm Size (acres):</label>
                            <input type="number" id="farmSize" name="farmSize" min="0">
                        </div>
                        <div class="form-group">
                            <label for="certifications">Certifications (optional):</label>
                            <input type="text" id="certifications" name="certifications" placeholder="e.g., Organic, GAP, etc.">
                        </div>
                    </div>

                    <button type="submit">Register</button>
                </form>
                <p>Already have an account? <a href="#" onclick="navigateTo('login')">Login here</a></p>
            </div>
        </section>

        <!-- Farmer Dashboard Section -->
        <section id="farmerDashboard" class="section hidden">
            <div class="container mx-auto px-4 py-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">My Produce Listings</h2>
                    <button onclick="showAddProduceForm()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                        + Add New Produce
                    </button>
                </div>
                
                <!-- Add Produce Form (Initially Hidden) -->
                <div id="addProduceForm" class="hidden bg-white rounded-lg shadow-md p-6 mb-6">
                    <h3 class="text-xl font-semibold mb-4">Add New Produce</h3>
                    <form id="produceForm" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="form-group">
                                <label for="produceType" class="block text-sm font-medium text-gray-700">Produce Type</label>
                                <input type="text" id="produceType" name="produceType" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div class="form-group">
                                <label for="amount" class="block text-sm font-medium text-gray-700">Amount</label>
                                <input type="number" id="amount" name="amount" min="0" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div class="form-group">
                                <label for="measurement" class="block text-sm font-medium text-gray-700">Measurement</label>
                                <select id="measurement" name="measurement" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                    <option value="kg">Kilograms (kg)</option>
                                    <option value="lbs">Pounds (lbs)</option>
                                    <option value="units">Units</option>
                                    <option value="boxes">Boxes</option>
                                    <option value="bushels">Bushels</option>
                                    <option value="tons">Tons</option>
                                    <option value="quintals">Quintals</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="grade" class="block text-sm font-medium text-gray-700">Grade</label>
                                <select id="grade" name="grade" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                    <option value="A">Grade A</option>
                                    <option value="B">Grade B</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="location" class="block text-sm font-medium text-gray-700">Location</label>
                                <input type="text" id="location" name="location" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div class="form-group">
                                <label for="price" class="block text-sm font-medium text-gray-700">Price per Measurement</label>
                                <input type="number" id="price" name="price" min="0" step="0.01" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3">
                            <button type="button" onclick="hideAddProduceForm()" 
                                class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-md">
                                Cancel
                            </button>
                            <button type="submit" 
                                class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                                Add Produce
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Farmer Listings Grid -->
                <div id="farmerListings" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Listings will be loaded here -->
                </div>

                <!-- Chatbot Widget -->
                <div id="chatbotWidget" class="fixed bottom-4 right-4 z-50">
                    <!-- Chat Button -->
                    <button id="chatToggleBtn" onclick="toggleChat()" class="bg-green-600 hover:bg-green-700 text-white p-4 rounded-full shadow-lg flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                        </svg>
                    </button>

                    <!-- Chat Window -->
                    <div id="chatWindow" class="hidden absolute bottom-16 right-0 w-96 bg-white rounded-lg shadow-xl">
                        <div class="p-4 bg-green-600 text-white rounded-t-lg flex justify-between items-center">
                            <h3 class="font-semibold">SmartFarm Assistant</h3>
                            <button onclick="toggleChat()" class="text-white hover:text-gray-200">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                        <div id="chatMessages" class="h-96 overflow-y-auto p-4 space-y-4">
                            <!-- Messages will be added here -->
                        </div>
                        <div class="p-4 border-t">
                            <form id="chatForm" onsubmit="sendMessage(event)" class="flex space-x-2">
                                <input type="text" id="messageInput" placeholder="Type your message..." 
                                    class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:border-green-500">
                                <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200">
                                    Send
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Orders Section -->
        <section id="ordersSection" class="section hidden">
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('available')">Available Produce</button>
                <button class="tab-btn" onclick="showTab('orders')">My Orders</button>
            </div>
            
            <div id="availableTab">
                <div class="filters">
                    <select id="measurementFilter">
                        <option value="">All Measurements</option>
                    </select>
                </div>
                <div id="produceGrid" class="produce-grid"></div>
            </div>
            
            <div id="ordersTab" class="hidden">
                <div id="myOrders" class="orders-grid">
                    <!-- Orders will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Consumer Dashboard Section -->
        <section id="consumerDashboard" class="section hidden">
            <div class="container mx-auto px-4 py-8">
                <h2 class="text-2xl font-bold mb-6">Available Produce</h2>
                
                <!-- Filters -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">Filters</h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <!-- Produce Type Filter -->
                        <div class="form-group">
                            <label for="produceTypeFilter" class="block text-sm font-medium text-gray-700 mb-2">Produce Type</label>
                            <select id="produceTypeFilter" class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="">All Types</option>
                                <option value="vegetables">Vegetables</option>
                                <option value="fruits">Fruits</option>
                                <option value="grains">Grains</option>
                                <option value="dairy">Dairy</option>
                            </select>
                        </div>

                        <!-- Grade Filter -->
                        <div class="form-group">
                            <label for="gradeFilter" class="block text-sm font-medium text-gray-700 mb-2">Grade</label>
                            <select id="gradeFilter" class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="">All Grades</option>
                                <option value="A">Grade A</option>
                                <option value="B">Grade B</option>
                            </select>
                        </div>

                        <!-- Price Range Filter -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Price Range</label>
                            <div class="flex space-x-2">
                                <input type="number" id="minPrice" placeholder="Min" min="0" 
                                    class="w-1/2 rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <input type="number" id="maxPrice" placeholder="Max" min="0"
                                    class="w-1/2 rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                        </div>

                        <!-- Availability Filter -->
                        <div class="form-group">
                            <label for="availabilityFilter" class="block text-sm font-medium text-gray-700 mb-2">Availability</label>
                            <select id="availabilityFilter" class="w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="">All</option>
                                <option value="in_stock">In Stock</option>
                                <option value="low_stock">Low Stock</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Filter Actions -->
                    <div class="flex justify-end mt-4 space-x-2">
                        <button onclick="resetFilters()" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
                            Reset Filters
                        </button>
                        <button onclick="applyFilters()" class="px-4 py-2 text-white bg-green-600 rounded-md hover:bg-green-700">
                            Apply Filters
                        </button>
                    </div>
                </div>

                <div id="availableProduce" class="space-y-4">
                    <!-- Available produce will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Purchase Modal -->
        <div id="purchaseModal" class="modal hidden">
            <div class="modal-content">
                <span class="close" onclick="closePurchaseModal()">&times;</span>
                <h2 style="margin-bottom: 1.5rem;">Purchase Produce</h2>
                <form id="purchaseForm" onsubmit="handlePurchase(event)">
                    <input type="hidden" id="produceId">
                    <div class="form-group">
                        <label>Produce Type</label>
                        <div class="info-value" id="modalProduceType"></div>
                    </div>
                    <div class="form-group">
                        <label>Available Amount</label>
                        <div class="info-value" id="modalAvailableAmount"></div>
                    </div>
                    <div class="form-group">
                        <label>Price per <span id="modalMeasurement"></span></label>
                        <div class="info-value" id="modalPrice"></div>
                    </div>
                    <div class="form-group">
                        <label for="purchaseQuantity">Quantity to Purchase</label>
                        <input type="number" id="purchaseQuantity" required min="1" class="form-input">
                    </div>
                    <div class="form-group">
                        <label>Total Price</label>
                        <div class="info-value total-price" id="modalTotalPrice">$0.00</div>
                    </div>
                    <button type="submit" class="submit-btn">Confirm Purchase</button>
                </form>
            </div>
        </div>

        <!-- Real-time Tracking Section -->
        <section id="trackingSection" class="section hidden">
            <div class="container mx-auto px-4 py-8">
                <h2 class="text-2xl font-bold mb-6">Real-time Produce Tracking</h2>
                
                <!-- Tracking Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-white rounded-lg shadow p-4">
                        <h3 class="text-lg font-semibold text-gray-600">Active Shipments</h3>
                        <p class="text-3xl font-bold text-green-600">24</p>
                    </div>
                    <div class="bg-white rounded-lg shadow p-4">
                        <h3 class="text-lg font-semibold text-gray-600">On-time Delivery</h3>
                        <p class="text-3xl font-bold text-green-600">98%</p>
                    </div>
                    <div class="bg-white rounded-lg shadow p-4">
                        <h3 class="text-lg font-semibold text-gray-600">Total Distance</h3>
                        <p class="text-3xl font-bold text-green-600">1,245 km</p>
                    </div>
                    <div class="bg-white rounded-lg shadow p-4">
                        <h3 class="text-lg font-semibold text-gray-600">Average Time</h3>
                        <p class="text-3xl font-bold text-green-600">4.2 hrs</p>
                    </div>
                </div>

                <!-- Real-Time Tracking Table -->
                <div class="bg-white rounded-lg shadow-md p-6 mt-8">
                    <div class="px-6 py-4 border-b">
                        <h3 class="text-xl font-semibold">Live Shipments</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Order ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Produce</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">From</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">To</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ETA</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="liveTrackingBody">
                                <!-- Tracking entries will be inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Temperature Monitoring -->
                <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold mb-4">Temperature Monitoring</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Truck #1 (Vegetables)</span>
                                <span class="text-green-600 font-semibold">4°C</span>
                                <div class="w-32 bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 60%"></div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Truck #2 (Fruits)</span>
                                <span class="text-yellow-600 font-semibold">8°C</span>
                                <div class="w-32 bg-gray-200 rounded-full h-2">
                                    <div class="bg-yellow-600 h-2 rounded-full" style="width: 75%"></div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Truck #3 (Mixed)</span>
                                <span class="text-green-600 font-semibold">5°C</span>
                                <div class="w-32 bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 65%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quality Metrics -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold mb-4">Quality Metrics</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Freshness Score</span>
                                <span class="text-green-600 font-semibold">95%</span>
                                <div class="w-32 bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 95%"></div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Humidity Level</span>
                                <span class="text-blue-600 font-semibold">85%</span>
                                <div class="w-32 bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 85%"></div>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-600">Package Integrity</span>
                                <span class="text-green-600 font-semibold">100%</span>
                                <div class="w-32 bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 100%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End Real-time Tracking Section -->

        <!-- Donations Section -->
        <section id="donationsSection" class="section hidden">
            <div class="container mx-auto px-4 py-8">
                <h2 class="text-2xl font-bold mb-6">Smart Donations</h2>
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="stat-card bg-green-50 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold text-green-700">Total Donations</h3>
                            <p class="text-3xl font-bold text-green-600">2,500 kg</p>
                            <p class="text-sm text-green-500">Last 30 days</p>
                        </div>
                        <div class="stat-card bg-blue-50 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold text-blue-700">Food Banks Helped</h3>
                            <p class="text-3xl font-bold text-blue-600">15</p>
                            <p class="text-sm text-blue-500">Active partnerships</p>
                        </div>
                        <div class="stat-card bg-purple-50 p-4 rounded-lg">
                            <h3 class="text-lg font-semibold text-purple-700">Impact</h3>
                            <p class="text-3xl font-bold text-purple-600">7,500</p>
                            <p class="text-sm text-purple-500">Meals provided</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricingSection" class="section hidden">
            <div class="container mx-auto px-4 py-8">
                <h2 class="text-2xl font-bold mb-6">Fair Pricing</h2>
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="pricing-card border p-4 rounded-lg">
                            <h3 class="text-xl font-semibold mb-4">For Farmers</h3>
                            <ul class="space-y-2">
                                <li class="flex items-center"><span class="text-green-500 mr-2">✓</span> Set your own prices</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">✓</span> Market price insights</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">✓</span> Bulk sale discounts</li>
                            </ul>
                        </div>
                        <div class="pricing-card border p-4 rounded-lg">
                            <h3 class="text-xl font-semibold mb-4">For Consumers</h3>
                            <ul class="space-y-2">
                                <li class="flex items-center"><span class="text-green-500 mr-2">✓</span> Wholesale prices</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">✓</span> Volume discounts</li>
                                <li class="flex items-center"><span class="text-green-500 mr-2">✓</span> Price alerts</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Logistics Section -->
        <section id="logisticsSection" class="section hidden">
            <div class="container mx-auto px-4 py-8">
                <h2 class="text-2xl font-bold mb-6">Smart Logistics</h2>
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="logistics-card">
                            <h3 class="text-xl font-semibold mb-4">Route Optimization</h3>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-700">Our smart algorithms optimize delivery routes to:</p>
                                <ul class="mt-2 space-y-2">
                                    <li class="flex items-center"><span class="text-green-500 mr-2">•</span> Reduce delivery time</li>
                                    <li class="flex items-center"><span class="text-green-500 mr-2">•</span> Minimize fuel consumption</li>
                                    <li class="flex items-center"><span class="text-green-500 mr-2">•</span> Maximize freshness</li>
                                </ul>
                            </div>
                        </div>
                        <div class="logistics-card">
                            <h3 class="text-xl font-semibold mb-4">Real-time Updates</h3>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-700">Stay informed with:</p>
                                <ul class="mt-2 space-y-2">
                                    <li class="flex items-center"><span class="text-green-500 mr-2">•</span> Live location tracking</li>
                                    <li class="flex items-center"><span class="text-green-500 mr-2">•</span> Temperature monitoring</li>
                                    <li class="flex items-center"><span class="text-green-500 mr-2">•</span> Delivery notifications</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div id="root"></div>
    <!-- Load dependencies first -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <!-- Load core functionality -->
    <script src="js/auth.js"></script>
    <script src="js/navigation.js"></script>
    
    <!-- Load feature modules -->
    <script src="js/produce.js"></script>
    <script src="js/tracking.js"></script>
    <script src="js/chat.js"></script>
    
    <!-- Load app initialization -->
    <script src="js/app.js"></script>
</body>
</html>
